<h1>Kaikki kirjat</h1>

<form method="get" action="/books" style="margin-bottom: 1rem;">
<label>Genre:
<select name="category_id">
    <option value="">(All)</option>
    {% for g in all_genres %}
    <option value="{{ g.id }}" {% if selected_genre == g.id %}selected{% endif %}>{{ g.name }}</option>
    {% endfor %}
</select>
</label>

<label style="margin-left:12px;">Minimum rating:
<select name="rating_min">
    <option value="">(No limit)</option>
    {% for n in [1,2,3,4,5] %}
    <option value="{{ n }}" {% if selected_rating == n %}selected{% endif %}>{{ n }}+</option>
    {% endfor %}
</select>
</label>

<button type="submit" style="margin-left:12px;">Filter</button>
<a href="/books" style="margin-left:8px;">Clear</a>
</form>

<ul>
{% for b in books %}
<li>
    <a href="/books/{{ b.id }}">{{ b.title }}</a> - {{ b.author }}
    {% if b.categories %}<small>({{ b.categories }})</small>{% endif %}
    {% if b['avg_rating'] is not none %} | ‚≠ê {{ b['avg_rating'] }}{% endif %}
</li>
{% else %}
<li>No results with selected filters</li>
{% endfor %}
</ul>
<p><a href="/dashboard"><button>Back to Main page</button></a></p>
