<!doctype html>
<html lang="fi">
    <head>
        <meta charset="utf-8">
        <title>@{{ user_.username }}</title>
    </head>
    <body>
        <h1>@{{ user_.username }}</h1>

        {% if user_.id == session["user_id"] %}
            <h3>Your Books</h3>
        {% else %}
            <h3>Books added by {{ user_.username }}</h3>
        {% endif %}

        <ul>
        {% for b in books %}
            <li>
                {{ b.title }}{% if b.author %} - {{ b.author }}{% endif %}
                
                {% if user_.id == session["user_id"] %}
                    <a href="/edit_book/{{ b.id }}"><button>Edit</button></a>
                    <form method="POST" action="/delete_book/{{ b.id }}" style="display:inline;">
                        <input type="hidden" name="csrf_token" value="{{ session.csrf_token }}">
                        <button type="submit" onclick="return confirm('Are you sure you want to delete this book?')">Delete</button>
                    </form>
                {% else %}
                    <a href="/books/{{ b.id }}?next={{ request.path }}"><button>Rate or comment</button></a>
                {% endif %}
            </li>
        {% else %}
            <li>No books yet</li>
        {% endfor %}
        </ul>

        <p>
            <a href="/dashboard"><button>Back to Main page</button></a>
        </p>
    </body>
</html>
